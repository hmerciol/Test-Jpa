package fr.banque.jpa.model;

import java.util.HashSet;
import java.util.Set;

import javax.persistence.Entity;
import javax.persistence.GeneratedValue;
import javax.persistence.Id;
import javax.persistence.Inheritance;
import javax.persistence.InheritanceType;
import javax.persistence.ManyToMany;
import javax.persistence.OneToMany;

/**
 * Représente un compte
 * 
 * @author hmerciol
 *
 */
@Entity
@Inheritance(strategy = InheritanceType.JOINED)
public class Compte {

	/**
	 * L'identifiant du compte
	 */
	@Id
	@GeneratedValue
	private Integer id_co;

	/**
	 * Numéro du compte
	 */
	private String numero;

	/**
	 * Solde du compte
	 */
	private double solde;

	/**
	 * Les clients possesseurs du compte
	 */
	@ManyToMany(mappedBy = "comptes")
	private Set<Client> clients = new HashSet<>();

	/**
	 * Les opérations à effectuer sur le compte
	 */
	@OneToMany(mappedBy = "compte")
	private Set<Operation> operations = new HashSet<>();

	/**
	 * Constructeur par défaut
	 */
	public Compte() {
		super();
	}

	/**
	 * Constructeur avec numéro et solde du compte
	 * 
	 * @param numero
	 *            Le numéro du compte
	 * @param solde
	 *            Le solde du compte
	 */
	public Compte(String numero, double solde) {
		super();
		this.numero = numero;
		this.solde = solde;
	}

	/**
	 * Récupère l'identifiant du compte
	 * 
	 * @return L'identifiant du compte
	 */
	public Integer getId() {
		return id_co;
	}

	/**
	 * Affecte l'identifiant du compte
	 * 
	 * @param id
	 *            Le nouvel identifiant
	 */
	public void setId(Integer id) {
		this.id_co = id;
	}

	/**
	 * Récupère le numéro de compte
	 * 
	 * @return Le numéro du compte
	 */
	public String getNumero() {
		return numero;
	}

	/**
	 * Affecte le numéro du compte
	 * 
	 * @param numero
	 *            Le nouveau numéro de compte
	 */
	public void setNumero(String numero) {
		this.numero = numero;
	}

	/**
	 * Récupère le solde du compte
	 * 
	 * @return Le solde du compte
	 */
	public double getSolde() {
		return solde;
	}

	/**
	 * Affecte le solde du compte
	 * 
	 * @param solde
	 *            Le nouveau solde du compte
	 */
	public void setSolde(double solde) {
		this.solde = solde;
	}

	/**
	 * Récupère les clients de ce compte
	 * 
	 * @return Les clients du compte
	 */
	public Set<Client> getClients() {
		return clients;
	}

	/**
	 * Affecte les clients du compte
	 * 
	 * @param clients
	 *            Les nouveaux clients du compte
	 */
	public void setClients(Set<Client> clients) {
		this.clients = clients;
	}

	/**
	 * Ajoute un client au compte
	 * 
	 * @param client
	 *            Le client à ajouter
	 */
	public void addClient(Client client) {
		client.addCompte(this);
	}

	/**
	 * Récupère les opérations sur le compte
	 * 
	 * @return Les opérations du compte
	 */
	public Set<Operation> getOperations() {
		return operations;
	}

	/**
	 * Affecte des opérations au compte
	 * 
	 * @param operations
	 *            Les nouvelles opérations du compte
	 */
	public void setOperations(Set<Operation> operations) {
		this.operations = operations;
	}

	/**
	 * Ajoute une opération au compte
	 * 
	 * @param operation
	 *            L'opération à ajouter
	 */
	public void addOperation(Operation operation) {
		operation.setCompte(this);
	}

}
